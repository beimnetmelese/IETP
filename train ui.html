<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AASTU Campus Autonomous Train</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', sans-serif;
        }

        :root {
            --bg-primary: #0f0f14;
            --bg-secondary: #1a1a23;
            --bg-card: #23232d;
            --accent: #6c5ce7;
            --accent-light: #8175f0;
            --text-primary: #ffffff;
            --text-secondary: #a0a0b0;
            --text-muted: #6a6a7c;
            --success: #00b894;
            --warning: #fdcb6e;
            --danger: #e84393;
            --border: #2d2d3a;
            --faculty: #74b9ff;
            --student: #55efc4;
            --staff: #ffeaa7;
        }

        body {
            background-color: var(--bg-primary);
            color: var(--text-primary);
            max-width: 400px;
            margin: 0 auto;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
            padding-bottom: 80px;
        }

        .container {
            padding: 20px;
            min-height: 100vh;
            position: relative;
        }

        .screen {
            display: none;
            animation: fadeIn 0.4s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .active {
            display: block;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding: 10px 0;
        }

        .header h1 {
            font-size: 1.6rem;
            font-weight: 700;
            background-clip: text;
            background: linear-gradient(90deg, var(--accent), var(--accent-light));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .campus-name {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-top: 5px;
        }

        .back-btn {
            color: var(--text-secondary);
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s;
            padding: 8px;
            border-radius: 10px;
            background: var(--bg-card);
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .back-btn:hover {
            color: var(--text-primary);
            background: var(--bg-secondary);
        }

        .icons {
            display: flex;
            gap: 12px;
        }

        .icon {
            font-size: 1.2rem;
            color: var(--text-secondary);
            cursor: pointer;
            transition: color 0.3s;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 10px;
            background: var(--bg-card);
        }

        .icon:hover {
            color: var(--text-primary);
            background: var(--bg-secondary);
        }

        .location {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 25px;
            color: var(--text-secondary);
            background: var(--bg-card);
            padding: 15px;
            border-radius: 16px;
            font-size: 0.95rem;
            border: 1px solid var(--border);
        }

        .map-container {
            height: 220px;
            background: var(--bg-secondary);
            border-radius: 20px;
            margin-bottom: 25px;
            position: relative;
            overflow: hidden;
            border: 1px solid var(--border);
        }

        #map,
        #tracking-map {
            height: 100%;
            width: 100%;
            border-radius: 20px;
        }

        .info-card {
            background: var(--bg-card);
            border-radius: 18px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid var(--border);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .info-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        .info-title {
            font-weight: 600;
            margin-bottom: 16px;
            color: var(--text-primary);
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .info-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--border);
        }

        .info-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .btn {
            display: block;
            width: 100%;
            padding: 18px;
            border: none;
            border-radius: 16px;
            background: linear-gradient(135deg, var(--accent), var(--accent-light));
            color: white;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            text-align: center;
            margin-bottom: 20px;
            transition: all 0.3s;
            box-shadow: 0 6px 16px rgba(108, 92, 231, 0.3);
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(108, 92, 231, 0.4);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-secondary {
            background: var(--bg-secondary);
            color: var(--text-primary);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            border: 1px solid var(--border);
        }

        .btn-secondary:hover {
            background: var(--bg-card);
            box-shadow: 0 6px 14px rgba(0, 0, 0, 0.15);
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 25px;
            background: var(--bg-card);
            padding: 6px;
            border-radius: 14px;
            border: 1px solid var(--border);
        }

        .tab {
            flex: 1;
            padding: 12px;
            text-align: center;
            background: transparent;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
            color: var(--text-secondary);
        }

        .tab:hover {
            color: var(--text-primary);
        }

        .tab.active {
            background: var(--accent);
            color: white;
            box-shadow: 0 4px 10px rgba(108, 92, 231, 0.3);
        }

        .input-group {
            margin-bottom: 25px;
        }

        .input-label {
            display: block;
            margin-bottom: 12px;
            font-weight: 500;
            color: var(--text-primary);
            font-size: 1rem;
        }

        .input {
            width: 100%;
            padding: 16px 18px;
            border: 1px solid var(--border);
            border-radius: 14px;
            font-size: 1rem;
            transition: all 0.3s;
            background: var(--bg-secondary);
            color: var(--text-primary);
        }

        .input:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(108, 92, 231, 0.2);
        }

        .building-option {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 18px;
            border: 1px solid var(--border);
            border-radius: 14px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: all 0.3s;
            background: var(--bg-secondary);
        }

        .building-option:hover {
            border-color: var(--accent);
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
        }

        .building-option.selected {
            border-color: var(--accent);
            background: rgba(108, 92, 231, 0.1);
            box-shadow: 0 4px 12px rgba(108, 92, 231, 0.2);
        }

        .notification {
            display: flex;
            align-items: flex-start;
            gap: 15px;
            padding: 18px;
            border-bottom: 1px solid var(--border);
            transition: background 0.3s;
            border-radius: 14px;
            margin-bottom: 10px;
        }

        .notification:hover {
            background: var(--bg-secondary);
        }

        .notification.unread {
            background: rgba(108, 92, 231, 0.1);
            border-radius: 14px;
        }

        .notification-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: var(--accent);
            margin-top: 8px;
            animation: pulse 2s infinite;
        }

        .notification-content {
            flex: 1;
        }

        .notification-time {
            color: var(--text-muted);
            font-size: 0.85rem;
            margin-top: 5px;
        }

        .history-item {
            padding: 18px;
            border-bottom: 1px solid var(--border);
            border-radius: 14px;
            margin-bottom: 12px;
            background: var(--bg-secondary);
            transition: all 0.3s;
        }

        .history-item:hover {
            background: var(--bg-card);
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
        }

        .history-time {
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .history-details {
            color: var(--text-secondary);
            margin-bottom: 12px;
        }

        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            max-width: 400px;
            margin: 0 auto;
            display: flex;
            background: var(--bg-card);
            backdrop-filter: blur(10px);
            box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.2);
            border-top: 1px solid var(--border);
            z-index: 100;
            padding-bottom: env(safe-area-inset-bottom);
        }

        .nav-item {
            flex: 1;
            padding: 16px 10px;
            text-align: center;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }

        .nav-item:hover {
            color: var(--text-primary);
        }

        .nav-item.active {
            color: var(--accent);
        }

        .nav-item.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 24px;
            height: 3px;
            background: var(--accent);
            border-radius: 3px;
        }

        .chart {
            height: 160px;
            background: var(--bg-secondary);
            border-radius: 16px;
            margin: 20px 0;
            display: flex;
            align-items: flex-end;
            padding: 20px;
            gap: 12px;
            border: 1px solid var(--border);
        }

        .bar {
            flex: 1;
            background: linear-gradient(to top, var(--accent), var(--accent-light));
            border-radius: 6px 6px 0 0;
            min-height: 10px;
            transition: height 0.5s ease;
        }

        .predictive-insight {
            background: rgba(253, 203, 110, 0.1);
            border-left: 4px solid var(--warning);
            padding: 18px;
            border-radius: 14px;
            margin: 15px 0;
        }

        .login-container {
            background: var(--bg-card);
            border-radius: 24px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
            margin-top: 40px;
            border: 1px solid var(--border);
        }

        .logo {
            text-align: center;
            margin-bottom: 40px;
        }

        .logo-icon {
            font-size: 4rem;
            background-clip: text;
            background: linear-gradient(135deg, var(--accent), var(--accent-light));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            display: block;
        }

        .logo h1 {
            font-size: 2.2rem;
            color: var(--text-primary);
            font-weight: 800;
            margin-bottom: 8px;
        }

        .logo p {
            color: var(--text-secondary);
            font-size: 1rem;
        }

        .stats-container {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
        }

        .stat-card {
            flex: 1;
            background: var(--bg-card);
            border-radius: 16px;
            padding: 20px;
            text-align: center;
            border: 1px solid var(--border);
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--accent);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .section-title {
            font-size: 1.4rem;
            font-weight: 600;
            margin-bottom: 20px;
            color: var(--text-primary);
        }

        .destination-card {
            background: var(--bg-card);
            border-radius: 18px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid var(--border);
            transition: all 0.3s;
        }

        .destination-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        .destination-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .destination-name {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .destination-code {
            font-size: 1rem;
            color: var(--accent);
            font-weight: 600;
        }

        .destination-details {
            display: flex;
            justify-content: space-between;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .user-type {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .user-type-btn {
            flex: 1;
            padding: 12px;
            text-align: center;
            border-radius: 12px;
            background: var(--bg-secondary);
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.3s;
            border: 1px solid var(--border);
        }

        .user-type-btn.active {
            background: var(--accent);
            color: white;
            border-color: var(--accent);
        }

        .user-type-btn.student.active {
            background: var(--student);
            border-color: var(--student);
        }

        .user-type-btn.faculty.active {
            background: var(--faculty);
            border-color: var(--faculty);
        }

        .user-type-btn.staff.active {
            background: var(--staff);
            border-color: var(--staff);
            color: var(--bg-primary);
        }

        .autonomous-badge {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            background: rgba(108, 92, 231, 0.2);
            color: var(--accent);
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            margin-left: 10px;
        }

        .capacity-indicator {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
        }

        .capacity-bar {
            flex: 1;
            height: 8px;
            background: var(--bg-primary);
            border-radius: 4px;
            overflow: hidden;
        }

        .capacity-fill {
            height: 100%;
            background: var(--success);
            border-radius: 4px;
        }

        .map-overlay {
            position: absolute;
            top: 10px;
            left: 10px;
            right: 10px;
            background: rgba(35, 35, 45, 0.9);
            padding: 10px 15px;
            border-radius: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(10px);
            border: 1px solid var(--border);
        }

        .map-controls {
            display: flex;
            gap: 10px;
        }

        .map-control {
            width: 36px;
            height: 36px;
            background: var(--bg-card);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 1px solid var(--border);
        }

        .map-control:hover {
            background: var(--bg-secondary);
        }

        .map-status {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .map-status.active {
            color: var(--success);
        }

        .leaflet-control-zoom {
            border: none !important;
            border-radius: 10px !important;
            overflow: hidden;
        }

        .leaflet-control-zoom a {
            background-color: var(--bg-card) !important;
            color: var(--text-primary) !important;
            border-bottom: 1px solid var(--border) !important;
            width: 36px !important;
            height: 36px !important;
            line-height: 36px !important;
            font-size: 18px !important;
        }

        .leaflet-control-zoom a:hover {
            background-color: var(--bg-secondary) !important;
        }

        .leaflet-control-zoom a:first-child {
            border-radius: 10px 10px 0 0 !important;
        }

        .leaflet-control-zoom a:last-child {
            border-radius: 0 0 10px 10px !important;
            border-bottom: none !important;
        }

        .leaflet-popup-content-wrapper {
            background: var(--bg-card) !important;
            color: var(--text-primary) !important;
            border-radius: 12px !important;
            border: 1px solid var(--border) !important;
        }

        .leaflet-popup-tip {
            background: var(--bg-card) !important;
            border: 1px solid var(--border) !important;
        }

        .leaflet-container {
            background: var(--bg-secondary) !important;
        }

        .leaflet-marker-icon {
            filter: hue-rotate(220deg) !important;
        }

        .train-icon {
            background: var(--accent);
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
            box-shadow: 0 0 10px rgba(108, 92, 231, 0.7);
            animation: pulse-train 2s infinite;
        }

        @keyframes pulse-train {
            0% {
                box-shadow: 0 0 0 0 rgba(108, 92, 231, 0.7);
            }

            70% {
                box-shadow: 0 0 0 10px rgba(108, 92, 231, 0);
            }

            100% {
                box-shadow: 0 0 0 0 rgba(108, 92, 231, 0);
            }
        }

        @keyframes pulse {
            0% {
                opacity: 1;
            }

            50% {
                opacity: 0.5;
            }

            100% {
                opacity: 1;
            }
        }
    </style>
</head>

<body>
    <!-- Login Screen -->
    <div id="login-screen" class="screen active container">
        <div class="login-container">
            <div class="logo">
                <i class="fas fa-graduation-cap logo-icon"></i>
                <h1>AASTU TRAIN</h1>
                <p>Autonomous Campus Transport System</p>
            </div>

            <div class="input-group">
                <label class="input-label">University ID</label>
                <input type="text" class="input" placeholder="Enter your university ID">
            </div>

            <div class="user-type">
                <div class="user-type-btn student active">Student</div>
                <div class="user-type-btn faculty">Faculty</div>
                <div class="user-type-btn staff">Staff</div>
            </div>

            <button class="btn" onclick="showScreen('home-screen')">ACCESS CAMPUS TRAIN</button>

            <div style="text-align: center; margin-top: 20px;">
                <p style="color: var(--text-secondary);">Visitor? <a href="#"
                        style="color: var(--accent); font-weight: 600;">GET TEMPORARY ACCESS</a></p>
            </div>
        </div>
    </div>

    <!-- Home Screen -->
    <div id="home-screen" class="screen container">
        <div class="header">
            <div>
                <h1>AASTU Train</h1>
                <div class="campus-name">Addis Ababa Science & Technology University</div>
            </div>
            <div class="icons">
                <i class="fas fa-bell icon" onclick="showScreen('notifications-screen')"></i>
                <i class="fas fa-user-graduate icon"></i>
            </div>
        </div>

        <div class="location">
            <i class="fas fa-map-marker-alt"></i>
            <span id="current-location">Detecting your location...</span>
        </div>

        <div class="map-container">
            <div id="map"></div>
            <div class="map-overlay">
                <div class="map-status" id="map-status">AASTU Campus Map</div>
                <div class="map-controls">
                    <div class="map-control" onclick="locateUser()">
                        <i class="fas fa-location-arrow"></i>
                    </div>
                    <div class="map-control" onclick="toggleMapStyle()">
                        <i class="fas fa-layer-group"></i>
                    </div>
                </div>
            </div>
        </div>

        <div class="stats-container">
            <div class="stat-card">
                <div class="stat-value">2</div>
                <div class="stat-label">Min ETA</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">68%</div>
                <div class="stat-label">Capacity</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">3</div>
                <div class="stat-label">Stops</div>
            </div>
        </div>

        <button class="btn" onclick="showScreen('request-screen')">
            <i class="fas fa-subway"></i> REQUEST CAMPUS TRAIN
        </button>

        <h2 class="section-title">Popular Destinations</h2>

        <div class="destination-card">
            <div class="destination-header">
                <div class="destination-name">Engineering Building</div>
                <div class="destination-code">ENG</div>
            </div>
            <div class="destination-details">
                <span>5 min â€¢ 0.8 miles</span>
                <span>Next train: 2 min</span>
            </div>
            <div class="capacity-indicator">
                <span>Capacity:</span>
                <div class="capacity-bar">
                    <div class="capacity-fill" style="width: 45%"></div>
                </div>
                <span>45%</span>
            </div>
        </div>

        <div class="destination-card">
            <div class="destination-header">
                <div class="destination-name">Student Center</div>
                <div class="destination-code">STU</div>
            </div>
            <div class="destination-details">
                <span>8 min â€¢ 1.2 miles</span>
                <span>Next train: 5 min</span>
            </div>
            <div class="capacity-indicator">
                <span>Capacity:</span>
                <div class="capacity-bar">
                    <div class="capacity-fill" style="width: 72%"></div>
                </div>
                <span>72%</span>
            </div>
        </div>

        <div class="tabs">
            <div class="tab" onclick="showScreen('analytics-screen')">
                <i class="fas fa-chart-bar"></i> Analytics
            </div>
            <div class="tab" onclick="showScreen('history-screen')">
                <i class="fas fa-history"></i> History
            </div>
        </div>
    </div>

    <!-- Request Screen -->
    <div id="request-screen" class="screen container">
        <div class="header">
            <div class="back-btn" onclick="showScreen('home-screen')">
                <i class="fas fa-arrow-left"></i>
            </div>
            <div class="icons">
                <i class="fas fa-subway icon"></i>
            </div>
        </div>

        <h2 class="section-title">REQUEST CAMPUS TRAIN</h2>

        <div class="input-group">
            <label class="input-label">Current Location</label>
            <button class="btn btn-secondary" style="margin-bottom: 12px;" onclick="useCurrentLocation()">
                <i class="fas fa-map-marker-alt"></i> Use My Current Building
            </button>
            <input type="text" class="input" id="current-building" value="Detecting..." readonly>
        </div>

        <div class="input-group">
            <label class="input-label">Select Destination</label>
            <div class="building-option" onclick="selectDestination('Engineering Building')">
                <input type="radio" name="building" id="eng-building">
                <i class="fas fa-building" style="color: var(--accent);"></i>
                <div>
                    <div>Engineering Building <span class="autonomous-badge"><i class="fas fa-robot"></i>
                            Autonomous</span></div>
                    <div style="font-size: 0.9rem; color: var(--text-secondary);">5 min â€¢ 0.8 miles â€¢ 45% capacity</div>
                </div>
            </div>
            <div class="building-option" onclick="selectDestination('Student Center')">
                <input type="radio" name="building" id="stu-center">
                <i class="fas fa-utensils" style="color: var(--accent);"></i>
                <div>
                    <div>Student Center <span class="autonomous-badge"><i class="fas fa-robot"></i> Autonomous</span>
                    </div>
                    <div style="font-size: 0.9rem; color: var(--text-secondary);">8 min â€¢ 1.2 miles â€¢ 72% capacity</div>
                </div>
            </div>
            <div class="building-option" onclick="selectDestination('Science Complex')">
                <input type="radio" name="building" id="sci-complex">
                <i class="fas fa-flask" style="color: var(--accent);"></i>
                <div>
                    <div>Science Complex <span class="autonomous-badge"><i class="fas fa-robot"></i> Autonomous</span>
                    </div>
                    <div style="font-size: 0.9rem; color: var(--text-secondary);">6 min â€¢ 1.0 miles â€¢ 30% capacity</div>
                </div>
            </div>
        </div>

        <div class="input-group">
            <label class="input-label">Passenger Type</label>
            <div class="user-type">
                <div class="user-type-btn student active">Student</div>
                <div class="user-type-btn faculty">Faculty</div>
                <div class="user-type-btn staff">Staff</div>
            </div>
        </div>

        <button class="btn" id="request-train-btn" onclick="requestTrain()">REQUEST AUTONOMOUS TRAIN</button>

        <div class="info-card">
            <div class="info-title">
                <i class="fas fa-info-circle"></i> Autonomous System Info
            </div>
            <p style="color: var(--text-secondary); font-size: 0.9rem; line-height: 1.5;">
                Our autonomous campus trains use AI navigation to efficiently transport students, faculty, and staff
                between campus buildings. The system optimizes routes in real-time based on demand.
            </p>
        </div>
    </div>

    <!-- Tracking Screen -->
    <div id="tracking-screen" class="screen container">
        <div class="header">
            <div class="back-btn" onclick="showScreen('request-screen')">
                <i class="fas fa-arrow-left"></i>
            </div>
            <div class="icons">
                <i class="fas fa-map icon"></i>
            </div>
        </div>

        <h2 class="section-title">Autonomous Train Incoming</h2>

        <div class="map-container">
            <div id="tracking-map"></div>
            <div class="map-overlay">
                <div class="map-status active">Train #AT-07 En Route</div>
                <div class="map-controls">
                    <div class="map-control" onclick="locateUserOnTrackingMap()">
                        <i class="fas fa-location-arrow"></i>
                    </div>
                </div>
            </div>
        </div>

        <div class="info-card">
            <div class="info-title">
                <i class="fas fa-robot"></i> Autonomous Train #AT-07
            </div>
            <div class="info-item">
                <span>Status</span>
                <span style="color: var(--success);">En Route</span>
            </div>
            <div class="info-item">
                <span>ETA</span>
                <span id="train-eta">2 minutes</span>
            </div>
            <div class="info-item">
                <span>Destination</span>
                <span id="train-destination">Engineering Building</span>
            </div>
            <div class="info-item">
                <span>Capacity</span>
                <span>45% â€¢ 12/26 seats</span>
            </div>
        </div>

        <div class="info-card">
            <div class="info-title">
                <i class="fas fa-route"></i> Route Information
            </div>
            <div class="info-item">
                <span>Next Stop</span>
                <span>Science Complex</span>
            </div>
            <div class="info-item">
                <span>Stops Remaining</span>
                <span>3 stops</span>
            </div>
            <div class="info-item">
                <span>Total Trip Time</span>
                <span>8 minutes</span>
            </div>
        </div>

        <button class="btn btn-secondary" onclick="cancelRequest()">
            <i class="fas fa-times"></i> Cancel Request
        </button>

        <div class="info-card" style="background: rgba(0, 184, 148, 0.1); border-left-color: var(--success);">
            <div class="info-title">
                <i class="fas fa-bell"></i> Notification
            </div>
            <p>Autonomous train will arrive at Library in 2 minutes. Please proceed to the boarding area.</p>
        </div>
    </div>

    <!-- Analytics Screen -->
    <div id="analytics-screen" class="screen container">
        <div class="header">
            <div class="back-btn" onclick="showScreen('home-screen')">
                <i class="fas fa-arrow-left"></i>
            </div>
            <div class="icons">
                <i class="fas fa-chart-bar icon"></i>
            </div>
        </div>

        <h2 class="section-title">Campus Transport Analytics</h2>

        <div class="chart">
            <div class="bar" style="height: 30%"></div>
            <div class="bar" style="height: 50%"></div>
            <div class="bar" style="height: 70%"></div>
            <div class="bar" style="height: 90%"></div>
            <div class="bar" style="height: 60%"></div>
            <div class="bar" style="height: 40%"></div>
            <div class="bar" style="height: 80%"></div>
        </div>

        <div class="info-card">
            <div class="info-title">Daily Statistics</div>
            <div class="info-item">
                <span>Total Rides</span>
                <span>284</span>
            </div>
            <div class="info-item">
                <span>Avg Wait Time</span>
                <span>2.4 min</span>
            </div>
            <div class="info-item">
                <span>Train Utilization</span>
                <span>68%</span>
            </div>
            <div class="info-item">
                <span>Distance Covered</span>
                <span>45.2 miles</span>
            </div>
        </div>

        <div class="info-card">
            <div class="info-title">User Distribution</div>
            <div class="info-item">
                <span><i class="fas fa-user-graduate" style="color: var(--student);"></i> Students</span>
                <span>72%</span>
            </div>
            <div class="info-item">
                <span><i class="fas fa-chalkboard-teacher" style="color: var(--faculty);"></i> Faculty</span>
                <span>18%</span>
            </div>
            <div class="info-item">
                <span><i class="fas fa-user-tie" style="color: var(--staff);"></i> Staff</span>
                <span>10%</span>
            </div>
        </div>

        <div class="tabs">
            <div class="tab active">Daily</div>
            <div class="tab">Weekly</div>
            <div class="tab">Monthly</div>
        </div>

        <div class="predictive-insight">
            <div class="info-title">Predictive Insights</div>
            <p>Peak demand: 8-10 AM & 2-4 PM</p>
            <p>Maintenance scheduled: Saturday 2 AM</p>
        </div>
    </div>

    <!-- History Screen -->
    <div id="history-screen" class="screen container">
        <div class="header">
            <div class="back-btn" onclick="showScreen('home-screen')">
                <i class="fas fa-arrow-left"></i>
            </div>
            <div class="icons">
                <i class="fas fa-history icon"></i>
            </div>
        </div>

        <h2 class="section-title">RIDE HISTORY</h2>

        <div style="margin-bottom: 15px; font-weight: 600; color: var(--text-primary);">Today</div>
        <div class="history-item">
            <div class="history-time">08:30 AM <i class="fas fa-robot" style="color: var(--accent);"></i></div>
            <div class="history-details">Library â†’ Engineering Building</div>
            <div class="history-details">0.8 miles â€¢ 5 minutes â€¢ Autonomous</div>
            <button class="btn btn-secondary" style="padding: 10px; margin-top: 10px;">
                <i class="fas fa-redo"></i> Repeat Journey
            </button>
        </div>

        <div style="margin-bottom: 15px; font-weight: 600; margin-top: 20px; color: var(--text-primary);">Yesterday
        </div>
        <div class="history-item">
            <div class="history-time">03:15 PM <i class="fas fa-robot" style="color: var(--accent);"></i></div>
            <div class="history-details">Student Center â†’ Science Complex</div>
            <div class="history-details">1.2 miles â€¢ 7 minutes â€¢ Autonomous</div>
            <button class="btn btn-secondary" style="padding: 10px; margin-top: 10px;">
                <i class="fas fa-redo"></i> Repeat Journey
            </button>
        </div>

        <div class="history-item">
            <div class="history-time">10:45 AM <i class="fas fa-robot" style="color: var(--accent);"></i></div>
            <div class="history-details">Dormitory â†’ Library</div>
            <div class="history-details">0.9 miles â€¢ 6 minutes â€¢ Autonomous</div>
            <button class="btn btn-secondary" style="padding: 10px; margin-top: 10px;">
                <i class="fas fa-redo"></i> Repeat Journey
            </button>
        </div>

        <button class="btn btn-secondary">Load More...</button>
    </div>

    <!-- Notifications Screen -->
    <div id="notifications-screen" class="screen container">
        <div class="header">
            <div class="back-btn" onclick="showScreen('home-screen')">
                <i class="fas fa-arrow-left"></i>
            </div>
            <div class="icons">
                <i class="fas fa-bell icon"></i>
            </div>
        </div>

        <h2 class="section-title">NOTIFICATIONS</h2>

        <div class="notification unread">
            <div class="notification-dot"></div>
            <div class="notification-content">
                <div style="font-weight: 600;">Autonomous Train #AT-07 is arriving in 2 minutes</div>
                <div class="notification-time">2 min ago</div>
            </div>
        </div>

        <div class="notification">
            <div style="width: 12px;"></div>
            <div class="notification-content">
                <div style="font-weight: 600;">Your ride to Engineering Building is completed</div>
                <div class="notification-time">3 hours ago</div>
            </div>
        </div>

        <div class="notification">
            <div style="width: 12px;"></div>
            <div class="notification-content">
                <div style="font-weight: 600;">Autonomous system maintenance completed</div>
                <div class="notification-time">1 day ago</div>
            </div>
        </div>

        <div class="notification">
            <div style="width: 12px;"></div>
            <div class="notification-content">
                <div style="font-weight: 600;">New route to Arts Building now available</div>
                <div class="notification-time">2 days ago</div>
            </div>
        </div>

        <div style="display: flex; gap: 12px; margin-top: 20px;">
            <button class="btn btn-secondary" style="flex: 1;">Mark All Read</button>
            <button class="btn btn-secondary" style="flex: 1;">Clear All</button>
        </div>
    </div>

    <!-- Bottom Navigation -->
    <div class="bottom-nav">
        <div class="nav-item active" onclick="showScreen('home-screen')">
            <i class="fas fa-home"></i>
            <div>Home</div>
        </div>
        <div class="nav-item" onclick="showScreen('analytics-screen')">
            <i class="fas fa-chart-bar"></i>
            <div>Analytics</div>
        </div>
        <div class="nav-item" onclick="showScreen('history-screen')">
            <i class="fas fa-history"></i>
            <div>History</div>
        </div>
        <div class="nav-item" onclick="showScreen('notifications-screen')">
            <i class="fas fa-bell"></i>
            <div>Alerts</div>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        // Global variables
        let map, trackingMap;
        let userLocation = null;
        let selectedDestination = null;
        let mapStyle = 'dark';

        // AASTU Campus coordinates and buildings
        const aastuCampus = {
            center: [8.9907, 38.7800],
            bounds: [
                [8.9880, 38.7770],
                [8.9930, 38.7830]
            ],
            buildings: [
                { name: "Main Library", lat: 8.9907, lng: 38.7800, code: "LIB", icon: "ðŸ“š" },
                { name: "Engineering Building", lat: 8.9915, lng: 38.7815, code: "ENG", icon: "ðŸ”§" },
                { name: "Student Center", lat: 8.9895, lng: 38.7790, code: "STU", icon: "ðŸ¢" },
                { name: "Science Complex", lat: 8.9920, lng: 38.7785, code: "SCI", icon: "ðŸ”¬" },
                { name: "Administration Building", lat: 8.9885, lng: 38.7810, code: "ADM", icon: "ðŸ›ï¸" },
                { name: "Lecture Halls", lat: 8.9910, lng: 38.7795, code: "LEC", icon: "ðŸŽ“" },
                { name: "Cafeteria", lat: 8.9890, lng: 38.7780, code: "CAF", icon: "ðŸ½ï¸" },
                { name: "Sports Complex", lat: 8.9880, lng: 38.7775, code: "SPO", icon: "âš½" }
            ]
        };

        // Train routes and positions
        const trainRoutes = {
            red: [
                [8.9885, 38.7810], // Admin
                [8.9915, 38.7815], // Engineering
                [8.9920, 38.7785], // Science
                [8.9895, 38.7790], // Student Center
                [8.9880, 38.7775]  // Sports Complex
            ],
            blue: [
                [8.9907, 38.7800], // Library
                [8.9910, 38.7795], // Lecture Halls
                [8.9890, 38.7780], // Cafeteria
                [8.9880, 38.7775]  // Sports Complex
            ]
        };

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function () {
            initializeMap();
            detectUserLocation();

            // Add hover effects to cards and buttons
            const cards = document.querySelectorAll('.info-card, .building-option, .history-item, .destination-card');
            cards.forEach(card => {
                card.addEventListener('mouseenter', function () {
                    this.style.transform = 'translateY(-5px)';
                });
                card.addEventListener('mouseleave', function () {
                    this.style.transform = 'translateY(0)';
                });
            });
        });

        // Initialize the map
        function initializeMap() {
            // Initialize main map
            map = L.map('map').setView(aastuCampus.center, 16);

            // Initialize tracking map
            trackingMap = L.map('tracking-map').setView(aastuCampus.center, 16);

            // Set up map tiles based on style
            updateMapStyle();

            // Add campus boundary
            L.rectangle(aastuCampus.bounds, {
                color: 'var(--accent)',
                weight: 2,
                fillOpacity: 0.05
            }).addTo(map);

            // Add campus building markers
            aastuCampus.buildings.forEach(building => {
                // Main map markers
                const marker = L.marker([building.lat, building.lng], {
                    icon: L.divIcon({
                        className: 'building-marker',
                        html: `<div style="background: var(--accent); color: white; border-radius: 50%; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; font-size: 14px;">${building.icon}</div>`,
                        iconSize: [30, 30],
                        iconAnchor: [15, 15]
                    })
                }).addTo(map).bindPopup(`
                    <div style="color: var(--text-primary);">
                        <b>${building.name}</b><br>
                        Code: ${building.code}<br>
                        <button onclick="selectDestinationFromMap('${building.name}')" style="background: var(--accent); color: white; border: none; padding: 5px 10px; border-radius: 5px; margin-top: 5px; cursor: pointer;">Select Destination</button>
                    </div>
                `);

                // Tracking map markers
                L.marker([building.lat, building.lng], {
                    icon: L.divIcon({
                        className: 'building-marker',
                        html: `<div style="background: var(--accent); color: white; border-radius: 50%; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; font-size: 14px;">${building.icon}</div>`,
                        iconSize: [30, 30],
                        iconAnchor: [15, 15]
                    })
                }).addTo(trackingMap).bindPopup(`<b>${building.name}</b><br>Code: ${building.code}`);
            });

            // Add train routes to tracking map
            const redRoute = L.polyline(trainRoutes.red, { color: '#e84393', weight: 4, opacity: 0.7 }).addTo(trackingMap);
            const blueRoute = L.polyline(trainRoutes.blue, { color: '#74b9ff', weight: 4, opacity: 0.7 }).addTo(trackingMap);

            // Add train markers to tracking map
            const redTrain = L.marker(trainRoutes.red[0], {
                icon: L.divIcon({
                    className: 'train-marker',
                    html: '<div class="train-icon"><i class="fas fa-train"></i></div>',
                    iconSize: [24, 24],
                    iconAnchor: [12, 12]
                })
            }).addTo(trackingMap).bindPopup('Autonomous Train #AT-07<br>Route: Red Line');

            const blueTrain = L.marker(trainRoutes.blue[0], {
                icon: L.divIcon({
                    className: 'train-marker',
                    html: '<div class="train-icon" style="background: #74b9ff;"><i class="fas fa-train"></i></div>',
                    iconSize: [24, 24],
                    iconAnchor: [12, 12]
                })
            }).addTo(trackingMap).bindPopup('Autonomous Train #AT-08<br>Route: Blue Line');

            // Animate train movement
            let redIndex = 0;
            let blueIndex = 0;

            setInterval(() => {
                // Move red train
                redIndex = (redIndex + 1) % trainRoutes.red.length;
                redTrain.setLatLng(trainRoutes.red[redIndex]);

                // Move blue train
                blueIndex = (blueIndex + 1) % trainRoutes.blue.length;
                blueTrain.setLatLng(trainRoutes.blue[blueIndex]);
            }, 3000);
        }

        // Update map style
        function updateMapStyle() {
            if (mapStyle === 'dark') {
                L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
                    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
                    subdomains: 'abcd',
                    maxZoom: 20
                }).addTo(map);

                L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
                    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
                    subdomains: 'abcd',
                    maxZoom: 20
                }).addTo(trackingMap);
            } else {
                L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
                    maxZoom: 20
                }).addTo(map);

                L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
                    maxZoom: 20
                }).addTo(trackingMap);
            }
        }

        // Toggle map style between dark and light
        function toggleMapStyle() {
            mapStyle = mapStyle === 'dark' ? 'light' : 'dark';
            map.eachLayer(layer => {
                if (layer instanceof L.TileLayer) {
                    map.removeLayer(layer);
                }
            });

            trackingMap.eachLayer(layer => {
                if (layer instanceof L.TileLayer) {
                    trackingMap.removeLayer(layer);
                }
            });

            updateMapStyle();
        }

        // Detect user location
        function detectUserLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    position => {
                        userLocation = {
                            lat: position.coords.latitude,
                            lng: position.coords.longitude
                        };

                        // Update UI with location
                        document.getElementById('current-location').textContent = 'Main Library (Your Location)';
                        document.getElementById('current-building').value = 'Main Library';

                        // Center map on user location
                        map.setView([userLocation.lat, userLocation.lng], 16);

                        // Add user location marker
                        L.marker([userLocation.lat, userLocation.lng], {
                            icon: L.divIcon({
                                className: 'user-location-marker',
                                html: '<i class="fas fa-user" style="color: #00b894; font-size: 20px; background: white; border-radius: 50%; padding: 5px;"></i>',
                                iconSize: [30, 30],
                                iconAnchor: [15, 15]
                            })
                        }).addTo(map).bindPopup('Your Location').openPopup();
                    },
                    error => {
                        console.error('Error getting location:', error);
                        document.getElementById('current-location').textContent = 'Main Library (Default)';
                        document.getElementById('current-building').value = 'Main Library';
                    }
                );
            } else {
                document.getElementById('current-location').textContent = 'Main Library (Default)';
                document.getElementById('current-building').value = 'Main Library';
            }
        }

        // Use current location
        function useCurrentLocation() {
            if (userLocation) {
                // Find the closest building to user location
                let closestBuilding = aastuCampus.buildings[0];
                let minDistance = Number.MAX_VALUE;

                aastuCampus.buildings.forEach(building => {
                    const distance = Math.sqrt(
                        Math.pow(building.lat - userLocation.lat, 2) +
                        Math.pow(building.lng - userLocation.lng, 2)
                    );

                    if (distance < minDistance) {
                        minDistance = distance;
                        closestBuilding = building;
                    }
                });

                document.getElementById('current-building').value = closestBuilding.name;
                alert(`Your current building has been set to: ${closestBuilding.name}`);
            } else {
                alert('Unable to detect your location. Using default location.');
            }
        }

        // Select destination from map popup
        function selectDestinationFromMap(destination) {
            selectedDestination = destination;
            showScreen('request-screen');

            // Update UI to show selected destination
            document.querySelectorAll('.building-option').forEach(option => {
                option.classList.remove('selected');
                if (option.querySelector('div').textContent.includes(destination)) {
                    option.classList.add('selected');
                    option.querySelector('input').checked = true;
                }
            });

            // Enable request button
            document.getElementById('request-train-btn').disabled = false;
        }

        // Select destination
        function selectDestination(destination) {
            selectedDestination = destination;

            // Update UI to show selected destination
            document.querySelectorAll('.building-option').forEach(option => {
                option.classList.remove('selected');
            });

            event.currentTarget.classList.add('selected');

            // Update radio button
            const buildingId = destination.toLowerCase().replace(' ', '-');
            document.getElementById(buildingId).checked = true;

            // Enable request button
            document.getElementById('request-train-btn').disabled = false;
        }

        // Request train
        function requestTrain() {
            if (!selectedDestination) {
                alert('Please select a destination first.');
                return;
            }

            // Update tracking screen with destination
            document.getElementById('train-destination').textContent = selectedDestination;

            // Show tracking screen
            showScreen('tracking-screen');

            // Simulate train arrival countdown
            let eta = 2;
            const etaElement = document.getElementById('train-eta');

            const countdown = setInterval(() => {
                eta--;
                etaElement.textContent = `${eta} minute${eta !== 1 ? 's' : ''}`;

                if (eta <= 0) {
                    clearInterval(countdown);
                    etaElement.textContent = 'Arriving now';
                    etaElement.style.color = 'var(--success)';

                    // Show completion message after a delay
                    setTimeout(() => {
                        alert(`You have arrived at ${selectedDestination}. Thank you for using AASTU Train!`);
                        showScreen('home-screen');
                    }, 2000);
                }
            }, 30000); // Update every 30 seconds for simulation
        }

        // Cancel request
        function cancelRequest() {
            if (confirm('Are you sure you want to cancel your train request?')) {
                showScreen('home-screen');
            }
        }

        // Locate user on map
        function locateUser() {
            if (userLocation) {
                map.setView([userLocation.lat, userLocation.lng], 16);
            } else {
                map.setView(aastuCampus.center, 16);
            }
        }

        // Locate user on tracking map
        function locateUserOnTrackingMap() {
            if (userLocation) {
                trackingMap.setView([userLocation.lat, userLocation.lng], 16);
            } else {
                trackingMap.setView(aastuCampus.center, 16);
            }
        }

        // Screen navigation
        function showScreen(screenId) {
            // Hide all screens
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });

            // Show the selected screen
            document.getElementById(screenId).classList.add('active');

            // Update bottom nav active state
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });

            // Set home as active if we're on home or a child screen of home
            if (screenId === 'home-screen' ||
                screenId === 'tracking-screen' ||
                screenId === 'request-screen') {
                document.querySelectorAll('.nav-item')[0].classList.add('active');
            }
        }

        // User type selection
        document.querySelectorAll('.user-type-btn').forEach(btn => {
            btn.addEventListener('click', function () {
                document.querySelectorAll('.user-type-btn').forEach(b => {
                    b.classList.remove('active');
                });
                this.classList.add('active');
            });
        });
    </script>
</body>

</html>